import{O as k,P as p,o as h,e as w,g as d,r as C,b as O,w as P,d as R,v as z,x as L,z as T}from"./modules/vue-DtEGhQT5.js";import{u as _,f as F}from"./slidev/context-QjzOLb-8.js";import{p as o}from"./p5.tree.esm-DEK-6yie.js";import{I as j}from"./slidev/center-mMhboX8f.js";import"./index-BHyQAbQn.js";import"./modules/shiki--QlaK0aY.js";import"./modules/file-saver-Ds2qT4Ee.js";const M={class:"flex flex-col items-center justify-center space-y-4"},B={__name:"ShaderCube",setup(b){_();const i=C(null);let l=null;const m=e=>{let s,f,a,c,u,g=`#version 300 es
    precision highp float;
    in vec4 aPosition;
    uniform mat4 uModelViewProjectionMatrix;
    void main() {
      gl_Position = uModelViewProjectionMatrix * aPosition;
    }`,y=`#version 300 es
    precision highp float;
    uniform sampler2D model;
    uniform vec2 u_resolution;
    out vec4 outColor;
    void main() {
      vec2 st = gl_FragCoord.xy / u_resolution;
      outColor = texture(model, vec2(st.s, 1.0 - st.t));
    }`;e.setup=async function(){e.createCanvas(400,400,e.WEBGL).parent(i.value),a=e.createShader(g,y),console.log("Usando p5.tree versiÃ³n:",o.Tree.VERSION),s=await e.loadModel("teapot.obj",!0),f=await e.loadModel("bunny.obj",!0),e.shader(a),a.setUniform("u_resolution",e.resolution()),c=e.createFramebuffer({format:e.FLOAT}),u=e.createFramebuffer({format:e.FLOAT})},e.draw=function(){e.background(20),e.orbitControl();const r=e.mapLocation({from:o.Tree.EYE,to:o.Tree.WORLD}),v=e.mapDirection({from:o.Tree.EYE,to:o.Tree.WORLD}),t=o.Vector.add(r,v),n=e.mapDirection(o.Tree.j,{from:o.Tree.EYE,to:o.Tree.WORLD});e.resetShader(),u.begin(),e.clear(),e.camera(r.x,r.y,r.z,t.x,t.y,t.z,n.x,n.y,n.z),e.push(),e.noStroke(),e.fill("red"),e.scale(1,-1),e.scale(.8),e.model(f),e.pop(),u.end(),c.begin(),e.clear(),e.camera(r.x,r.y,r.z,t.x,t.y,t.z,n.x,n.y,n.z),e.push(),e.noStroke(),e.fill("blue"),e.scale(1,-1),e.model(s),e.pop(),c.end(),e.shader(a),e.push(),e.stroke("purple"),e.strokeWeight(2),a.setUniform("model",u.color),x(o.Tree.NEAR),a.setUniform("model",c.color),x(o.Tree.RIGHT),e.pop()};function x(r,v){e.push(),e.beginShape();const t={[o.Tree.NEAR]:[[-80,-80,80],[80,-80,80],[80,80,80],[-80,80,80]],[o.Tree.FAR]:[[-80,-80,-80],[80,-80,-80],[80,80,-80],[-80,80,-80]],[o.Tree.LEFT]:[[-80,-80,-80],[-80,-80,80],[-80,80,80],[-80,80,-80]],[o.Tree.RIGHT]:[[80,-80,80],[80,-80,-80],[80,80,-80],[80,80,80]],[o.Tree.BOTTOM]:[[-80,80,80],[80,80,80],[80,80,-80],[-80,80,-80]],[o.Tree.TOP]:[[-80,-80,80],[80,-80,80],[80,-80,-80],[-80,-80,-80]]};if(t[r])for(const[n,S,E]of t[r])e.vertex(n,S,E);e.endShape(e.CLOSE),e.pop()}e.mouseWheel=()=>!1};return k(()=>{l=new o(m,i.value)}),p(()=>{l&&l.remove()}),(e,s)=>(h(),w("div",M,[d("div",{ref_key:"sketchContainer",ref:i,class:"rounded-lg overflow-hidden border border-white/10 shadow-2xl"},null,512),s[0]||(s[0]=d("p",{class:"text-xs text-gray-400 italic"},"Non-euclidean rendering",-1))]))}},G={__name:"slides.md__slidev_4",setup(b){const{$clicksContext:i,$frontmatter:l}=_();return i.setup(),(m,e)=>{const s=B;return h(),O(j,z(L(T(F)(T(l),3))),{default:P(()=>[e[0]||(e[0]=d("h1",null,"Portal Rendering (Non-Euclidean)",-1)),e[1]||(e[1]=d("p",null,"Use FBOs & p5.tree to project worlds within cube",-1)),R(s)]),_:1},16)}}};export{G as default};
