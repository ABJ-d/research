import{O as W,P as N,o as B,e as R,j as A,g as I,F as D,r as O,b as $,w as j,d as q,v as H,x as U,z as T}from"./modules/vue-DtEGhQT5.js";import{u as M,f as X}from"./slidev/context-B8_C1T5K.js";import{p as a}from"./app-Ddl2Q9KC.js";import"./p5.tree.esm-BaqJxL2q.js";import{I as G}from"./slidev/default-CFiP4jC_.js";import"./index-Cs3j3FI-.js";import"./modules/shiki--QlaK0aY.js";import"./modules/file-saver-Ds2qT4Ee.js";const Y={class:"relative inline-block rounded-lg shadow-2xl border border-white/10 overflow-hidden"},Z={__name:"VisibilitySketch",setup(C){M();const o=O(null);let f=null;const S=e=>{let w,x,k,y,g,r,b,d,u,v,c,s,h,n,V,E;const L=[-350,-279,181],P=[12.9,6.4,48.3],F=[-.53,.78,.23],z=()=>{if(e.camera(0,0,b.value(),0,0,b.value()>0?-300:300,0,1,0),V=e.eMatrix(),g.checked()){if(r.checked()){const t=u.value(),l=t*Math.tan(d.value()/2),_=-l,i=l*(e.width/e.height),m=-i;e.frustum(m,i,l,_,t,v.value())}else e.frustum(c.value(),s.value(),n.value(),h.value(),u.value(),v.value());r.checked()?d.show():d.hide(),r.checked()?c.hide():c.show(),r.checked()?s.hide():s.show(),r.checked()?n.hide():n.show(),r.checked()?h.hide():h.show()}else d.hide(),n.show(),r.checked()?(s.value(n.value()*(e.width/e.height)),e.ortho(-s.value(),s.value(),n.value(),-n.value(),u.value(),v.value())):e.ortho(c.value(),s.value(),n.value(),h.value(),u.value(),v.value()),r.checked()?s.hide():s.show(),r.checked()?c.hide():c.show(),r.checked()?h.hide():h.show();E=e.pMatrix()};e.setup=function(){e.createCanvas(600,400,e.WEBGL).parent(o.value),e.frameRate(100),e.colorMode(e.RGB,1),w=e.createFramebuffer({format:e.FLOAT});const l=100;x=[];for(let _=0;_<50;_++){const i={type:e.random()<.5?"box":"sphere",visibility:a.Tree.VISIBLE,color:e.color(e.random(),e.random(),e.random()),position:a.Vector.random3D().mult(l),velocity:e.createVector(e.random()*2-1,e.random()*2-1,e.random()*2-1).mult(.5),rotation:e.createVector(e.random(),e.random(),e.random()).normalize().mult(.01),animate(){this.position.add(this.velocity),["x","y","z"].forEach(m=>{e.abs(this.position[m])>l&&(this.velocity[m]*=-1,this.position[m]=e.constrain(this.position[m],-l,l))})}};i.type==="box"?(i.width=e.random()*12+8,i.height=e.random()*12+8,i.depth=e.random()*12+8,i.cull=()=>{i.visibility=e.visibility({corner1:a.Vector.sub(i.position,e.createVector(i.width/2,i.height/2,i.depth/2)),corner2:a.Vector.add(i.position,e.createVector(i.width/2,i.height/2,i.depth/2))})}):(i.radius=e.random()*12+8,i.cull=()=>{i.visibility=e.visibility({center:i.position,radius:i.radius})}),x.push(i)}k=e.createCheckbox("animate",!0),k.parent(o.value),k.style("color","indigo"),k.position(e.width-200,10),y=e.createCheckbox("cull",!0),y.parent(o.value),y.style("color","indigo"),y.position(e.width-200,35),g=e.createCheckbox("perspective",!0),g.parent(o.value),g.style("color","yellow"),g.position(e.width-110,10),r=e.createCheckbox("aspect ratio",!0),r.parent(o.value),r.style("color","yellow"),r.position(e.width-110,35),b=e.createSlider(-150,200,115,1),b.parent(o.value),b.style("width","100px"),b.position(e.width-110,60),d=e.createSlider(.1,1.4,.6,.01),d.parent(o.value),d.style("width","100px"),d.position(e.width-110,85),u=e.createSlider(20,100,30,1),u.parent(o.value),u.style("width","100px"),u.position(e.width-110,110),v=e.createSlider(110,330,230,1),v.parent(o.value),v.style("width","100px"),v.position(e.width-110,135),n=e.createSlider(10,e.height/3,e.height/12,1),n.parent(o.value),n.style("width","100px"),n.position(e.width-110,160),s=e.createSlider(10,e.width/3,e.width/12,1),s.parent(o.value),s.style("width","100px"),s.position(e.width-110,185),h=e.createSlider(-e.height/3,-10,-e.height/12,1),h.parent(o.value),h.style("width","100px"),h.position(e.width-110,210),c=e.createSlider(-e.width/3,-10,-e.width/12,1),c.parent(o.value),c.style("width","100px"),c.position(e.width-110,235),e.camera(...L,...P,...F),e.ortho(-e.width/3,e.width/3,-e.height/3,e.height/3,1,1e4)},e.draw=function(){(e.mouseX<=e.width-120||e.mouseY>=265)&&e.orbitControl(),e.background("#879319"),e.push(),e.rotateX(e.HALF_PI),e.strokeWeight(.5),e.stroke("blue"),e.grid({subdivisions:20,size:300}),e.pop(),x.forEach(t=>{e.push(),e.translate(t.position),e.strokeWeight(t.visibility===a.Tree.INVISIBLE?1:1.2),t.visibility===a.Tree.VISIBLE?(e.fill(t.color),e.noStroke()):(e.noFill(),e.strokeWeight(1),t.visibility===a.Tree.SEMIVISIBLE?e.stroke(t.color):e.stroke("black"));const l=t.visibility===a.Tree.VISIBLE?20:6;t.type==="box"?e.box(t.width,t.height,t.depth):e.sphere(t.radius,l,l),e.pop()}),e.push(),e.strokeWeight(3),e.stroke("magenta"),e.fill(e.color(1,0,1,.3)),e.viewFrustum({eMatrix:V??e.createMatrix(4),pMatrix:E??e.createMatrix(4),bits:a.Tree.NEAR|a.Tree.FAR,viewer:()=>e.axes({size:50,bits:a.Tree.X|a.Tree._Y|a.Tree._Z})}),e.pop(),w.begin(),e.clear(),e.background(.7,.4,.3),z(),x.forEach(t=>{k.checked()&&t.animate(),y.checked()?t.cull():t.visibility=a.Tree.VISIBLE,(t.visibility===a.Tree.VISIBLE||t.visibility===a.Tree.SEMIVISIBLE)&&(e.push(),e.translate(t.position),e.noStroke(),e.fill(t.color),t.type==="box"?e.box(t.width,t.height,t.depth):e.sphere(t.radius),e.pop())}),w.end(),e.beginHUD(),e.translate(e.width-e.width/3,e.height),e.scale(1,-1),e.image(w,0,0,e.width/3,e.height/3),e.endHUD()},e.mouseWheel=()=>!1};return W(()=>{f=new a(S,o.value)}),N(()=>{f&&f.remove()}),(e,w)=>(B(),R(D,null,[A(" relative: para que los DOM de p5 (position:absolute) queden anclados aquÃ­ "),I("div",Y,[I("div",{ref_key:"sketchContainer",ref:o},null,512)])],2112))}},J={class:"transform scale-90"},re={__name:"slides.md__slidev_12",setup(C){const{$clicksContext:o,$frontmatter:f}=M();return o.setup(),(S,e)=>{const w=Z;return B(),$(G,H(U(T(X)(T(f),11))),{default:j(()=>[e[0]||(e[0]=I("h1",null,"Visibility visualization",-1)),I("div",J,[q(w)])]),_:1},16)}}};export{re as default};
