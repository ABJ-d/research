import{O as k,P as M,o as v,e as y,g as l,r as P,b as j,w as O,D as R,d as E,v as F,x as N,z as x}from"./modules/vue-DtEGhQT5.js";import{u as _,f as I}from"./slidev/context-CoHpShTk.js";import{p as r}from"./app-Ddl2Q9KC.js";import"./p5.tree.esm-BaqJxL2q.js";import{I as V}from"./slidev/center-B0_-wY41.js";import"./index-BAg_tTDD.js";import"./modules/shiki--QlaK0aY.js";import"./modules/file-saver-Ds2qT4Ee.js";const B={class:"flex flex-col items-center justify-center space-y-4"},L={__name:"ShaderCube",setup(b){_();const a=P(null);let n=null;const d=e=>{let o,f,t,c,u,s,i,C=`#version 300 es
    precision highp float;
    in vec4 aPosition;
    uniform mat4 uModelViewProjectionMatrix;
    void main() {
      gl_Position = uModelViewProjectionMatrix * aPosition;
    }`,T=`#version 300 es
    precision highp float;
    uniform sampler2D model;
    uniform vec2 u_resolution;
    out vec4 outColor;
    void main() {
      // Calculate normalized coordinates
      outColor = texture(model, gl_FragCoord.xy / u_resolution);
    }`;e.setup=async function(){e.createCanvas(400,400,e.WEBGL).parent(a.value),o=await e.loadModel("teapot.obj",!0),f=await e.loadModel("bunny.obj",!0),s=e.createCamera(),i=e.createCamera(),c=e.createFramebuffer({format:e.FLOAT}),u=e.createFramebuffer({format:e.FLOAT}),t=e.createShader(C,T),e.shader(t),t.setUniform("u_resolution",e.resolution()),console.log("Using p5 version:",e.VERSION),console.log("Using p5.Tree version:",r.Tree.VERSION)},e.draw=function(){e.background(20),e.setCamera(s),e.orbitControl(),i.cameraMatrix=s.cameraMatrix,i.projMatrix=s.projMatrix,e.resetShader(),u.begin(),e.clear(),e.setCamera(i),e.push(),e.noStroke(),e.fill("red"),e.scale(1,-1),e.scale(.8),e.model(f),e.pop(),u.end(),c.begin(),e.clear(),e.setCamera(i),e.push(),e.noStroke(),e.fill("blue"),e.scale(1,-1),e.model(o),e.pop(),c.end(),e.setCamera(s),e.shader(t),e.push(),e.stroke("purple"),e.strokeWeight(2),t.setUniform("model",u.color),h(r.Tree.NEAR),t.setUniform("model",c.color),h(r.Tree.RIGHT),e.pop()};function h(m,U){e.push(),e.beginShape();const g={[r.Tree.NEAR]:[[-80,-80,80],[80,-80,80],[80,80,80],[-80,80,80]],[r.Tree.FAR]:[[-80,-80,-80],[80,-80,-80],[80,80,-80],[-80,80,-80]],[r.Tree.LEFT]:[[-80,-80,-80],[-80,-80,80],[-80,80,80],[-80,80,-80]],[r.Tree.RIGHT]:[[80,-80,80],[80,-80,-80],[80,80,-80],[80,80,80]],[r.Tree.BOTTOM]:[[-80,80,80],[80,80,80],[80,80,-80],[-80,80,-80]],[r.Tree.TOP]:[[-80,-80,80],[80,-80,80],[80,-80,-80],[-80,-80,-80]]};if(g[m])for(const[p,w,S]of g[m])e.vertex(p,w,S);e.endShape(e.CLOSE),e.pop()}e.mouseWheel=()=>!1};return k(()=>{n=new r(d,a.value)}),M(()=>{n&&n.remove()}),(e,o)=>(v(),y("div",B,[l("div",{ref_key:"sketchContainer",ref:a,class:"rounded-lg overflow-hidden border border-white/10 shadow-2xl"},null,512),o[0]||(o[0]=l("p",{class:"text-xs text-gray-400 italic"},"Non-euclidean multi-pass rendering with programmable fragment shaders",-1))]))}},J={__name:"slides.md__slidev_13",setup(b){const{$clicksContext:a,$frontmatter:n}=_();return a.setup(),(d,e)=>{const o=L;return v(),j(V,F(N(x(I)(x(n),12))),{default:O(()=>[e[0]||(e[0]=l("h1",null,"Portal Rendering",-1)),e[1]||(e[1]=l("p",null,[R("Multi-pass portal rendering with fragment shaders using "),l("a",{href:"https://www.npmjs.com/package/p5.tree",target:"_blank"},"p5.tree")],-1)),E(o)]),_:1},16)}}};export{J as default};
